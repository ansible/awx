<div id="input-source-lookup" class="modal at-Modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content at-Modal-window">
            <div class="Modal-header">
                <div class="Modal-title">
                    <div class="at-Modal-heading">
                        <h4 class="modal-title at-Modal-title">{{ vm.title }}</h4>
                    </div>
                </div>
                <div class="Modal-exitHolder">
                    <div class="at-Modal-dismiss">
                        <i class="fa fa-lg fa-times-circle" ng-click="vm.close()"></i>
                    </div>
                </div>
            </div>
            <!-- =================================================================================================== -->
            <at-tab-group>
                <at-tab
                    state="vm.tabs.credential"
                    ng-click="vm.onTabSelect('credential');"
                >
                    CREDENTIAL
                </at-tab>
                <at-tab
                    state="vm.tabs.metadata"
                    ng-click="vm.onTabSelect('metadata');"
                >
                    METADATA
                </at-tab>
            </at-tab-group>
            <div></div>
            <!-- =================================================================================================== -->

            <div ng-if="vm.tabs.metadata._active">
                <at-form state="vm.form" autocomplete="off" id="input_source_form">
                    <at-input-group col="12" tab="20" state="vm.form.inputs" form-id="input_source">
                        TITLE
                    </at-input-group>
                </at-form>
            </div>

            <div ng-show="vm.tabs.credential._active">
                <div ng-hide="vm.collection.length === 0 && (searchTags | isEmpty)">
                    <div style="min-height: 20px"></div>
                    <smart-search
                        django-model="{{ vm.name + 's' }}"
                        base-path="{{ vm.name + 's' }}"
                        iterator="{{ vm.list.iterator }}"
                        dataset="vm.dataset"
                        list="vm.list"
                        collection="vm.collection"
                        default-params="vm.defaultParams"
                        query-set="vm.queryset"
                        search-tags="searchTags">
                    </smart-search>
                </div>
                <div
                    class="row"
                    ng-show="vm.collection.length === 0 && !(searchTags | isEmpty)"
                >
                    <div
                        class="col-lg-12 List-searchNoResults"
                        translate
                    >
                        No records matched your search.
                    </div>
                </div>
                <div
                    class="List-noItems"
                    ng-show="vm.collection.length === 0 && (searchTags | isEmpty)"
                >
                    PLEASE ADD ITEMS TO THIS LIST
                </div>
                <div
                    class="list-table-container"
                    ng-show="vm.collection.length > 0"
                >
                    <div
                        id="credential_input_source_table"
                        class="List-table"
                        is-extended="false"
                    >
                        <div class="List-lookupLayout List-tableHeaderRow">
                            <div></div>
                            <div class="d-flex h-100">
                                <div
                                    base-path="{{ vm.name + 's' }}"
                                    collection="vm.collection"
                                    dataset="vm.dataset"
                                    column-sort=""
                                    column-field="name"
                                    column-iterator="{{ vm.list.iterator }}"
                                    column-label="Name"
                                    column-custom-class="List-tableCell col-md-4 col-sm-9 col-xs-9"
                                    query-set="vm.queryset"
                                >
                                </div>
                            </div>
                        </div>
                        <div>
                            <div
                                id="{{ obj.id }}"
                                class="List-lookupLayout List-tableRow"
                                ng-repeat="obj in vm.collection"
                            >
                                <div class="List-centerEnd select-column">
                                    <input type="radio"
                                        name="check_{{ vm.name }}_{{ obj.id }}"
                                        ng-checked="obj.id === vm.selectedId"
                                        ng-click="vm.toggle_row(obj)"
                                    >
                                </div>
                                <div class="d-flex h-100">
                                    <div
                                        class="List-tableCell name-column col-sm-12"
                                         ng-click="vm.toggle_row(obj)"
                                    >
                                        {{ obj.name }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <paginate
                    base-path="{{ vm.name + 's' }}"
                    collection="vm.collection"
                    dataset="vm.dataset"
                    iterator="{{ vm.list.iterator }}"
                    query-set="vm.queryset"
                    hide-view-per-page="true"
                >
                </paginate>
            </div>
            <!-- ============================================================================================ -->
            <div >
                <div class="Prompt-footer">
                    <button
                        type="button"
                        class="Prompt-infoButton"
                        ng-show="vm.tabs.metadata._active"
                        ng-click="vm.test()"
                    >
                        {{:: vm.strings.get('TEST') }}
                    </button>
                    <button
                        type="button"
                        class="Prompt-defaultButton"
                        ng-click="vm.close()"
                    >
                        {{:: vm.strings.get('CANCEL') }}
                    </button>
                    <button
                        type="button"
                        class="Prompt-actionButton"
                        ng-show="vm.tabs.credential._active"
                        ng-click="vm.next()"
                    >
                        {{:: vm.strings.get('NEXT') }}
                    </button>
                    <button
                        ng-disabled="true"
                        type="button"
                        class="Prompt-actionButton"
                        ng-show="vm.tabs.metadata._active"
                        ng-click="vm.select()"
                    >
                        {{:: vm.strings.get('OK') }}
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

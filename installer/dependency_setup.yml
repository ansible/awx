---
- include_vars: 
    file: vars/dependencies.yml

- name: Install EPEL
  package:
    name: epel-release
    state: installed

- name: Install dependencies
  package:
    name:
      - "{{ docker }}"
      - gettext 
      - python-pip 
      - "{{ gnu_comp }}"
      - bzip2 
    state: installed

- name: Start and enable Docker
  service:
    name: docker
    state: started
    enabled: true

- name: Upgrade pip
  pip:
    name: pip
    extra_args: --upgrade

- name: Install docker-py
  pip:
    name: docker-py

- name: Get NodeJS repo
  yum_repository: 
    name: nodejs-6
    description: "NodeJS repo for {{ ansible_distribution }} {{ ansible_distribution_major_version }}"
    baseurl: "{{ nodejs_repo }}"

- name: Install NodeJS
  package:
    name: nodejs
    state: installed

- name: Update npm
  npm:
    name: npm
    state: latest
    global: yes

